/**
 * Project: TestScale
 * File: Scale.java
 * Date: 2011-03-10
 * Time: 11:16:40 AM
 */

/**
 * @author Steffen L. Norgren, A00683006
 *
 */
public class Scale {
	private static final int nTick = 5;

	/**
	 * @param args
	 */
	public static void main(String[] args) {
		// TODO Auto-generated method stub
		//bestTick(265F, 10);
		looseLabel(-0.85F, 0.179F);
	}
	
	public static void looseLabel(double min, double max) {
		int nFrac;
		double tickSpacing; /* tick mark spacing */
		double range; /* data range in graph */
		double graphMin; /* minimum data point */
		double graphMax; /* maximum data point */
		
		range = niceNum(max - min, false);
		tickSpacing = niceNum(range / (nTick - 1), true);
		graphMin = Math.floor(min / tickSpacing) * tickSpacing;
		graphMax = Math.ceil(max / tickSpacing) * tickSpacing;
		nFrac = (int) Math.max(-Math.floor(Math.log10(tickSpacing)), 0);
		
		System.out.println("Range\t\t: " + range);
		System.out.println("Tick Spacing\t: " + tickSpacing);
		System.out.println("Graph Min\t: " + graphMin);
		System.out.println("Graph Max\t: " + graphMax);
		System.out.println("Nice Fraction\t: " + nFrac);
	}
	
	public static double niceNum(double range, boolean round) {
		double exponent; /* exponent of range */
		double fraction; /* fractional part of range */
		double niceFraction; /* nice, rounded fraction */
		
		exponent = Math.floor(Math.log10(range));
		fraction = range / Math.pow(10, exponent);
		
		if (round) {
			if (fraction < 1.5F)
				niceFraction = 1F;
			else if (fraction < 3F)
				niceFraction = 2F;
			else if (fraction < 7F)
				niceFraction = 5F;
			else
				niceFraction = 10F;
		}
		else {
			if (fraction <= 1F)
				niceFraction = 1F;
			else if (fraction <= 2F)
				niceFraction = 2F;
			else if (fraction <= 5F)
				niceFraction = 5F;
			else
				niceFraction = 10F;
		}
		
		return niceFraction * Math.pow(10F, exponent);
	}
}
